# “Monitoreo de la calidad del agua de un canal en Mixquiahuala” 

### Introducción
El prototipo de IoT para la agricultura en la zona de Mixquiahuala consiste en un sistema de monitoreo de la calidad del agua diseñado específicamente
para los cultivos que utilizan el agua de un canal. Utilizando las tecnologías inalámbricas, este sistema detecta y analiza parámetros clave como el pH,
la temperatura y la turbidez del agua en tiempo real con información clara.

LoRaWAN, un estándar global para comunicaciones de baja potencia y área amplia, es la tecnología subyacente utilizada en este sistema. Gracias a 
LoRaWAN, los datos recopilados se transmiten a larga distancia con bajo consumo de energía y costos de conectividad reducidos. Además, esta tecnología
es versátil y segura, lo que la convierte en una opción ideal para aplicaciones agrícolas.

El sistema de monitoreo de calidad del agua ofrece a agricultores de Mixquiahuala la capacidad de ajustar de manera proactiva niveles de nutrientes y
frecuencia de riego en función de los parámetros. Al tener información precisa en tiempo real sobre la calidad del agua, los agricultores pueden 
optimizar el crecimiento de cultivos y prevenir problemas relacionados con la calidad del agua.

Las tecnologías inalámbricas, en el prototipo para la agricultura en Mixquiahuala es fundamental para el éxito del sistema de monitoreo de calidad del
agua. Estas tecnologías permiten una comunicación eficiente, reducen los costos y brindan información precisa, lo que ayuda a los agricultores a tomar 
decisiones más informadas y optimizar el crecimiento de sus cultivos.

## Antecedentes y planteamiento de problema
Con base en los antecedentes, se ha detectado que en la calidad del agua surge la siguiente problemática; de acuerdo con Mendoza, Cervantes, Valenzuela,
Guzmán, Orona, & Cervantes (2021), el crecimiento demográfico y la urbanización han llevado a un incremento en la generación de aguas residuales.
Este fenómeno se debe a la mayor concentración de población en áreas urbanas y al consecuente aumento en el consumo y producción de desechos. Destacan 
que la escasez de agua es un factor determinante que impulsa el uso de aguas residuales para riego. Esta práctica responde a la necesidad de encontrar 
alternativas frente a la limitada disponibilidad de recursos hídricos saludables. Además, National Geographic (2017), algunas de las causas de la 
contaminación de agua son que, en los vertidos y las fugas de los oleoductos o las operaciones de fracturación hidráulica.

Es importante mencionar el sector agrícola en México, ya que es el sector que más agua consume en el país (Conagua, 2014b; Shah, 2005 en WWAP, 2015).
Hasta 2014 fue la mayor beneficiada en la concesión de volúmenes de agua de uso consuntivo (76.7% del volumen, 65 155 hm3), principalmente para riego
(en este uso consuntivo se incluyen también a las actividades pecuarias y acuícolas). La demanda de líquido por este sector se incrementó entre 2001 
y 2014 en 15.4% (Mapa 1). El 64.5 % del agua para uso agrupado agrícola proviene de fuentes superficiales (ríos, arroyos y lagos), mientras que el 35.5%
procede de fuentes subterráneas (acuíferos), ver el recuadro Agua virtual en México.

Por lo anterior, las consecuencias derivadas de estas problemáticas son las siguientes: 
Según la Organización de Agua en México (2011), nos dice que en 2015 murieron en México 3 754 personas debido a enfermedades infecciosas intestinales.
Según Ayres & Duncan (2017) El uso de aguas residuales puede transmitir enfermedades a través de cultivos contaminados, especialmente si las aguas 
contienen nematodos intestinales y bacterias fecales.

De acuerdo con Mendoza, Cervantes, Valenzuela, Guzmán, Orona, & Cervantes (2021), indican que el uso de aguas residuales sin tratamiento adecuado 
puede llevar a la contaminación del suelo y cultivos, afectando la calidad de los alimentos y la salud pública.
Estos hechos indican la necesidad de implementar estrategias para la gestión del agua y soluciones tecnológicas para dar solución a los desafíos
relacionados con la calidad y disponibilidad del recurso hídrico en México, dando más énfasis en el contexto de la creciente demanda agrícola y 
la problemática asociada con el uso de aguas residuales para riego.

En muchas regiones de México, la contaminación de los ríos, lagos y otras fuentes deagua representa un desafío significativo para la salud pública y la 
seguridad alimentaria. El problema central radica en la ausencia de un monitoreo en tiempo real que permita evaluar de manera efectiva la calidad del 
recurso hídrico en el canal mencionado. Esta falta de información precisa y actualizada sobre los niveles de contaminación dificulta la toma de decisiones 
informadas para mitigar los impactos ambientales y proteger la salud de los agricultores y consumidores.

Un ejemplo de esta problemática está ubicado en Mixquiahuala, un municipio del Estado de Hidalgo. Aquí, la utilización de aguas contaminadas provenientes del
canal para el riego agrícola resulta en la presencia de sustancias dañinas en los alimentos cultivados, lo cual contraviene las normas establecidas por el 
Gobierno de México en relación con la calidad y tratamiento de aguas residuales. Estas normativas según el Gobierno de México (s.f) la NOM-179-SSA1-2020 para 
la calidad del agua destinada al consumo humano, la NOM-001-SEMARNAT-1996 que establece los límites máximos permisibles de contaminantes en las descargas de
aguas residuales en aguas y bienes nacionales, y la NOM-003-SEMARNAT-1997 que regula las características y límites máximos permisibles de contaminantes en las
aguas residuales tratadas que se reutilizan en servicios al público en general.

Esta falta de cumplimiento de las normativas vigentes hace más visible la necesidad deimplementar soluciones tecnológicas avanzadas que permitan identificar y 
cuantificar con precisión los contaminantes presentes en el agua utilizada para el riego. La investigación y desarrollo de un sistema de monitoreo, basado en 
tecnologías innovadoras como sensores avanzados y tecnología inalámbrica (LoRa) será fundamental para contribuir a especialistas para mejorar esta problemática 
de manera holística y sostenible. El incumplimiento de las normas y regulaciones en el problema de la calidad del agua no solo pone en riesgo la salud de la  
población y el medio ambiente, sino que también afecta de forma inmediata y negativa la seguridad alimentaria, así como la sostenibilidad de las prácticas agrícolas
que usan el canal ya mencionado. La implementación de un sistema de monitoreo avanzado no solo facilitará la implementación detección pronta de contaminantes, 
sino que también permitirá la adopción de medidas preventivas y correctivas oportunas para proteger la calidad del agua y garantizar la calidad de los alimentos producidos.

## Justificación
La contaminación del agua en la zona persiste a lo largo de los años debido a lacontaminación del río Tula, provocando una violación de las normas establecidas 
para la calidad del agua utilizada en la agricultura. A continuación, se destacan los beneficios y objetivos del desarrollo del prototipo. En primer lugar, incluyen 
la protección de la salud pública al garantizar la calidad de los alimentos cultivados con agua proveniente del canal. Asimismo, el cumplimiento normativo, la 
preservación del medio ambiente, la promoción de prácticas sostenibles y la mejora de la calidad de vida de las comunidades afectadas, al llevar a cabo un monitoreo 
para el análisis en la toma de decisiones de los agricultores. Además, con la implementación de este monitoreo se espera mejorar la calidad de vida de las comunidades 
agrícolas afectadas al proporcionar información precisa y actualizada para la toma de decisiones informadas por parte de los agricultores. Esto facilitará la adopción 
de medidas preventivas y mejoras adecuadas, contribuyendo a optimizar  el uso del recurso hídrico y reducir los riesgos asociados con la contaminación del agua, 
salvaguardando la salud de la población.

## Objetivos

   Objetivo General
Diseñar y desarrollar un prototipo de monitoreo para el canal de aguas negras en Mixquiahuala. Este sistema implementará sensores para detectar parámetros como la
temperatura, ph y turbidez utilizando tecnologías inalámbricas para transmitir datos en tiempo real que serán recabados en un dashboard. Este sistema busca analizar
la gestión y calidad del agua utilizada para el riego en la zona agrícola de Mixquiahuala, contribuyendo así a la cooperación en conjunto con los agricultores para
mitigar los impactos negativos de la contaminación en los canales de riego.

Objetivo Específico

  - Implementar sensores para medir la temperatura, ph y turbidez del agua en el canal de aguas negras, garantizando una lectura precisa y confiable.
  - Integrar tecnologías inalámbricas para la transmisión de datos en tiempo real desde los sensores instalados hasta un dashboard para su análisis.

## Desarrollo del prototipo
El estándar de la pila de comunicación ISO, LoRa contiene sólo el protocolo de la capa deenlace. El protocolo de la capa de enlace se refiere a los  protocolos utilizados 
para la comunicación entre nodos adyacentes en una red [3]. LoRaWan incluye el otro nivel de red y estandariza el nodo para enviar la información a cualquier puesto de base
ya conectado a una plataforma en la nube [1]. LoRa permite tasas de datos bajas a moderadas y ofrece flexibilidad en la configuración de frecuencias y potencia de transmisión,
adaptándose así a diversas regulaciones regionales y requerimientos de alcance. Sin embargo, algunos parámetros físicos interfieren como la atenuación, reflexión, dispersión, entre otros [2].

Al iniciar el prototipo se tenía previsto una investigación y análisis, definición de requisitos, el desarrollo del software obteniendo una lectura de datos desde un ID sin embargo, para
que al pasar a la siguiente fase del prototipo se realizaron algunas configuraciones. En una placa raspberry pi 3 se realizó la instalación de los programas node-red, mosquitto MQTT y
grafanna, donde en el caso de node-red se realizó la instalación de algunos plugins, de igual manera por comandos en bash se realizaron configuraciones de mosquitto donde se asigna el puerto
1883 y de usuarios anónimos, para la asignación de usuarios y contraseña se creó un archivo txt para después ser encriptado, en seguida se asigna estas configuraciones en el archivo que se modificó primero.
